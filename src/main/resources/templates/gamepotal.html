<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¯¸ë‹ˆê²Œì„ ì²œêµ­</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ëª¨ë°”ì¼ ì•± ëŠë‚Œì„ ìœ„í•œ í°íŠ¸ ë° ê¸°ë³¸ ì„¤ì • */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            -webkit-tap-highlight-color: transparent; /* ëª¨ë°”ì¼ í„°ì¹˜ í•˜ì´ë¼ì´íŠ¸ ì œê±° */
            background-color: #f3f4f6;
        }

        /* ê²Œì„ ì¹´ë“œ ëˆŒë ¸ì„ ë•Œ íš¨ê³¼ */
        .game-card:active {
            transform: scale(0.95);
            transition: transform 0.1s;
        }
        
        /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¸°ê¸° (ê¹”ë”í•œ UI) */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="h-screen w-full max-w-md mx-auto bg-white shadow-xl overflow-hidden flex flex-col relative">

    <!-- 1. ìƒë‹¨ í—¤ë” -->
    <header class="bg-indigo-600 text-white p-4 flex items-center justify-between shadow-md z-10">
        <h1 class="text-xl font-bold flex items-center gap-2">
            <span>ğŸ®</span> ë¯¸ë‹ˆê²Œì„ í¬í„¸
        </h1>
        <div class="text-xs bg-indigo-500 px-2 py-1 rounded-full">
            Total Plays: <span id="total-plays">0</span>
        </div>
    </header>

    <!-- 2. ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ (ìŠ¤í¬ë¡¤ ê°€ëŠ¥) -->
    <main id="main-content" class="flex-1 overflow-y-auto p-4 no-scrollbar relative">
        
        <!-- [View 1] ê²Œì„ ê·¸ë¦¬ë“œ í™”ë©´ -->
        <div id="grid-view" class="transition-opacity duration-300">
            <h2 class="text-gray-700 font-bold mb-4 text-lg">ì¸ê¸° ê²Œì„ ëª©ë¡</h2>
            
            <!-- 3x3 ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆ -->
            <div class="grid grid-cols-3 gap-3" id="game-grid">
                <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¹´ë“œê°€ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>

            <!-- í•˜ë‹¨ ë°°ë„ˆ (ì˜ˆì‹œ) -->
            <div class="mt-6 bg-gradient-to-r from-pink-500 to-orange-400 rounded-xl p-4 text-white text-center shadow-lg">
                <p class="font-bold text-lg">ğŸ”¥ ì˜¤ëŠ˜ì˜ ì¶”ì²œ</p>
                <p class="text-sm opacity-90">ì¹œêµ¬ì™€ í•¨ê»˜ ë­í‚¹ ë„ì „!</p>
            </div>
        </div>

        <!-- [View 2] ê²Œì„ ìƒì„¸ í™”ë©´ (ì²˜ìŒì—” ìˆ¨ê¹€) -->
        <div id="detail-view" class="hidden absolute top-0 left-0 w-full h-full bg-white p-4 flex flex-col">
            <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
            <button onclick="goBack()" class="mb-4 flex items-center text-gray-600 hover:text-indigo-600 font-bold">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
                ëª©ë¡ìœ¼ë¡œ
            </button>

            <!-- ê²Œì„ ì‹¤í–‰ ì˜ì—­ -->
            <div class="flex-1 flex flex-col items-center">
                <div id="detail-icon" class="text-6xl mb-4 animate-bounce"></div>
                <h2 id="detail-title" class="text-2xl font-bold text-gray-800 mb-2"></h2>
                
                <div class="bg-gray-100 px-4 py-2 rounded-full text-sm text-gray-500 mb-6">
                    ëˆ„ì  ì‹¤í–‰ íšŸìˆ˜: <span id="detail-count" class="text-indigo-600 font-bold">0</span>íšŒ
                </div>

                <!-- ê²Œì„ í™”ë©´ í”Œë ˆì´ìŠ¤í™€ë” (iframe ëŒ€ì‹  ì‹œê°ì  ì˜ˆì‹œ) -->
                <div class="w-full aspect-[4/5] bg-gray-900 rounded-xl flex flex-col items-center justify-center text-white relative overflow-hidden shadow-inner border-4 border-gray-800">
                    <div class="absolute inset-0 bg-gradient-to-br from-gray-800 to-black opacity-50"></div>
                    <div class="z-10 text-center p-6">
                        <p class="text-3xl mb-2">â–¶ï¸</p>
                        <p class="font-bold text-lg">ê²Œì„ ë¡œë”© ì¤‘...</p>
                        <p class="text-xs text-gray-400 mt-2">ì—¬ê¸°ì— ì‹¤ì œ ê²Œì„ iframeì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p>
                        <button class="mt-8 bg-indigo-500 hover:bg-indigo-600 text-white px-6 py-2 rounded-full font-bold transition">
                            ê²Œì„ ì‹œì‘í•˜ê¸°
                        </button>
                    </div>
                </div>

                <div class="mt-6 w-full">
                    <h3 class="font-bold text-gray-700 mb-2">ê²Œì„ ì„¤ëª…</h3>
                    <p id="detail-desc" class="text-sm text-gray-500 bg-gray-50 p-3 rounded-lg border border-gray-200">
                        <!-- ì„¤ëª… í…ìŠ¤íŠ¸ -->
                    </p>
                </div>
            </div>
        </div>

    </main>

    <!-- 3. í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (ì•± ëŠë‚Œ) -->
    <nav class="bg-white border-t border-gray-200 flex justify-around p-3 text-xs text-gray-400">
        <button onclick="goBack()" class="flex flex-col items-center text-indigo-600">
            <span class="text-xl">ğŸ </span>
            <span class="mt-1">í™ˆ</span>
        </button>
        <button class="flex flex-col items-center hover:text-gray-600">
            <span class="text-xl">ğŸ†</span>
            <span class="mt-1">ë­í‚¹</span>
        </button>
        <button class="flex flex-col items-center hover:text-gray-600">
            <span class="text-xl">ğŸ‘¤</span>
            <span class="mt-1">ë‚´ì •ë³´</span>
        </button>
    </nav>

    <script>
        // --- 1. ë°ì´í„° ì„¤ì • ---
        const games = [
            { id: 1, title: "ì í”„ì™•", icon: "ğŸ¸", color: "bg-green-100", desc: "ì¥ì• ë¬¼ì„ í”¼í•´ ëì—†ì´ ì í”„í•˜ì„¸ìš”!" },
            { id: 2, title: "ë²½ëŒê¹¨ê¸°", icon: "ğŸ§±", color: "bg-orange-100", desc: "ê³µì„ íŠ€ê²¨ ëª¨ë“  ë²½ëŒì„ íŒŒê´´í•˜ì„¸ìš”." },
            { id: 3, title: "í¼ì¦ë§ì¶”ê¸°", icon: "ğŸ§©", color: "bg-blue-100", desc: "í©ì–´ì§„ ì¡°ê°ì„ ë§ì¶° ê·¸ë¦¼ì„ ì™„ì„±í•˜ì„¸ìš”." },
            { id: 4, title: "ë ˆì´ì‹±", icon: "ğŸï¸", color: "bg-red-100", desc: "ê°€ì¥ ë¹ ë¥¸ ì†ë„ë¡œ ì„œí‚·ì„ ì™„ì£¼í•˜ì„¸ìš”." },
            { id: 5, title: "ì¹´ë“œë’¤ì§‘ê¸°", icon: "ğŸƒ", color: "bg-purple-100", desc: "ê°™ì€ ê·¸ë¦¼ì˜ ì¹´ë“œë¥¼ ì°¾ì•„ ê¸°ì–µë ¥ì„ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”." },
            { id: 6, title: "í…ŒíŠ¸ë¦¬ìŠ¤", icon: "ğŸ‘¾", color: "bg-yellow-100", desc: "ë¸”ë¡ì„ ìŒ“ì•„ ë¼ì¸ì„ ì œê±°í•˜ì„¸ìš”." },
            { id: 7, title: "ìŠˆíŒ…ê²Œì„", icon: "ğŸš€", color: "bg-indigo-100", desc: "ìš°ì£¼ì„ ì„ ì¡°ì¢…í•˜ì—¬ ì ë“¤ì„ ë¬¼ë¦¬ì¹˜ì„¸ìš”." },
            { id: 8, title: "ìŠ¤ë„¤ì´í¬", icon: "ğŸ", color: "bg-emerald-100", desc: "ê¼¬ë¦¬ê°€ ë‹¿ì§€ ì•Šê²Œ ì‚¬ê³¼ë¥¼ ë¨¹ìœ¼ë©° ì„±ì¥í•˜ì„¸ìš”." },
            { id: 9, title: "ë‘ë”ì§€", icon: "ğŸ”¨", color: "bg-amber-100", desc: "íŠ€ì–´ë‚˜ì˜¤ëŠ” ë‘ë”ì§€ë¥¼ ë¹ ë¥´ê²Œ ì¡ìœ¼ì„¸ìš”!" }
        ];

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤
        const STORAGE_KEY = 'miniGamePortalCounts';

        // --- 2. ì´ˆê¸°í™” ë° ë Œë”ë§ ---
        document.addEventListener('DOMContentLoaded', () => {
            renderGrid();
            updateTotalPlays();
        });

        // ì €ì¥ëœ ì¹´ìš´íŠ¸ ê°€ì ¸ì˜¤ê¸°
        function getCounts() {
            const data = localStorage.getItem(STORAGE_KEY);
            return data ? JSON.parse(data) : {};
        }

        // ì¹´ìš´íŠ¸ ì €ì¥í•˜ê¸°
        function saveCount(id) {
            const counts = getCounts();
            counts[id] = (counts[id] || 0) + 1;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(counts));
            return counts[id];
        }

        // ê·¸ë¦¬ë“œ ê·¸ë¦¬ê¸°
        function renderGrid() {
            const grid = document.getElementById('game-grid');
            const counts = getCounts();
            
            grid.innerHTML = ''; // ì´ˆê¸°í™”

            games.forEach(game => {
                const count = counts[game.id] || 0;
                
                // ì¹´ë“œ ìš”ì†Œ ìƒì„±
                const card = document.createElement('div');
                card.className = `game-card flex flex-col items-center justify-center p-3 rounded-2xl shadow-sm border border-gray-100 cursor-pointer ${game.color} aspect-square`;
                card.onclick = () => openGame(game);

                card.innerHTML = `
                    <div class="text-3xl mb-2 filter drop-shadow-sm">${game.icon}</div>
                    <div class="font-bold text-sm text-gray-700 truncate w-full text-center">${game.title}</div>
                    <div class="mt-2 text-xs bg-white/80 px-2 py-1 rounded-full text-gray-500 font-medium">
                        â–¶ <span id="count-disp-${game.id}">${count}</span>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // ì´ ì‹¤í–‰ íšŸìˆ˜ ì—…ë°ì´íŠ¸ (í—¤ë”)
        function updateTotalPlays() {
            const counts = getCounts();
            const total = Object.values(counts).reduce((a, b) => a + b, 0);
            document.getElementById('total-plays').innerText = total.toLocaleString();
        }

        // --- 3. í™”ë©´ ì „í™˜ ë¡œì§ ---

        // ê²Œì„ ìƒì„¸ í™”ë©´ ì—´ê¸°
        function openGame(game) {
            // 1. ì¹´ìš´íŠ¸ ì¦ê°€ ë° ì €ì¥
            const newCount = saveCount(game.id);
            
            // 2. ë©”ì¸ í™”ë©´ ì—…ë°ì´íŠ¸ (ëŒì•„ì™”ì„ ë•Œ ë°˜ì˜ë˜ë„ë¡)
            const countDisp = document.getElementById(`count-disp-${game.id}`);
            if(countDisp) countDisp.innerText = newCount;
            updateTotalPlays();

            // 3. ìƒì„¸ í™”ë©´ ë°ì´í„° ì±„ìš°ê¸°
            document.getElementById('detail-title').innerText = game.title;
            document.getElementById('detail-icon').innerText = game.icon;
            document.getElementById('detail-count').innerText = newCount;
            document.getElementById('detail-desc').innerText = game.desc;

            // 4. í™”ë©´ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜
            const gridView = document.getElementById('grid-view');
            const detailView = document.getElementById('detail-view');

            gridView.classList.add('hidden');
            detailView.classList.remove('hidden');
            
            // ìŠ¤í¬ë¡¤ ìµœìƒë‹¨ìœ¼ë¡œ ì´ë™
            document.getElementById('main-content').scrollTop = 0;
        }

        // ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        function goBack() {
            const gridView = document.getElementById('grid-view');
            const detailView = document.getElementById('detail-view');

            detailView.classList.add('hidden');
            gridView.classList.remove('hidden');
        }

    </script>
</body>
</html>